

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="chaye">
  <meta name="keywords" content="">
  
    <meta name="description" content="杂项总结杂项例题萌新题1大写字母就是flag，写个简单脚本 1234567891011121314#include&lt;stdio.h&gt;#include&lt;string.h&gt;int main()&#123;    char s[1000]&#x3D;&#123;&#x27;\0&#x27;&#125;;    gets(s);    int len&#x3D;strlen(s);    for(in">
<meta property="og:type" content="article">
<meta property="og:title" content="杂项总结">
<meta property="og:url" content="http://example.com/2025/01/19/MISC/%E5%9F%BA%E7%A1%80/%E6%9D%82%E9%A1%B9%E6%80%BB%E7%BB%93/index.html">
<meta property="og:site_name" content="chaye的博客">
<meta property="og:description" content="杂项总结杂项例题萌新题1大写字母就是flag，写个简单脚本 1234567891011121314#include&lt;stdio.h&gt;#include&lt;string.h&gt;int main()&#123;    char s[1000]&#x3D;&#123;&#x27;\0&#x27;&#125;;    gets(s);    int len&#x3D;strlen(s);    for(in">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715076716049-7e2771f9-ca09-40ea-8603-0d6a138ae21b-178881.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715076761369-298a4100-0f01-4b1d-ab66-e1d8851961f4-767259.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715080319355-6dcd924b-4078-4eb9-a5e9-76d4f3a22d16-463995.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715080319328-03d43b8d-5052-4baa-b2eb-195421aaf04c-080697.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715080319328-1e9272a7-c29d-4a5e-86d9-5b74ceb71adb-199725.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715080319344-27b995e7-2657-4e8e-ac7a-8678c9e3f0fb-830660.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715080159737-bf7beda1-57f9-4d7b-b94e-369cd0bab969-804414.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715080259574-f206e589-159a-4f39-b5d5-eab6ba7198f2-395351.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715080729487-4959214d-7808-42fe-81ca-89fa501f1255-656299.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715081138945-05411f70-0c96-439a-942a-b85b886b4c58-148233.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715081597458-73401b1b-a0a0-4296-ad59-46dee88c64ae-411427.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715081659947-32ed728f-cd1c-4852-a3d3-040d983e483f-983767.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715082527848-11d91933-aacc-4aa3-96ec-5074f16bf28d-509357.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715082538254-603d3adb-0722-4f01-a14c-2683ee60669c-805285.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715082552004-07a3c180-683a-4faa-bb84-290164ee0797-937598.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715082564963-de35d817-833c-4db5-a0b5-4a70530a261e-695449.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715082579844-11749991-5770-4311-90ae-3775379d3fe9-507394.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715082588509-45d8fd03-66d1-4777-ac9b-c87c2b6ceed1-408260.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715082607181-8db66ec8-3f7b-42b2-aa51-b46859510838-099887.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715082633923-c9fa024e-d24b-4dbd-b3fb-e0e541719852-887810.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715082644847-6542cc8d-ed0a-4663-b2c8-59ea29496671-644232.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715082652439-5f0fecf2-3eec-4240-806e-ae1e54f70b12-365576.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715082685375-989806db-8a59-4ab6-9d67-867dcda5283a-376214.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715082692133-5a26e5ac-afe8-4814-bb34-cc62ab67c9f1-056413.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715082707161-b0d1b22a-6e8e-4e05-9ce1-87f5f332f5eb-671681.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715082714951-c4ba2def-dea0-4768-9bf1-65a6ac81044e-758415.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715083184886-15f6ff7e-feec-4719-b9de-7015742403f3-546256.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715083222397-7684b0f2-64c4-4305-8181-03fbf4363b53-153216.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715249478476-fc4500f4-d179-4a9e-8ca3-b739743ed423-562206.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715249511415-c2ce3779-2cd3-4e8f-bf8a-75c7641c71f1-445904.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1721531586323-c3eaaf07-e067-4b09-a548-d29e7041d0ae-716908.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1721531685378-62100093-7327-4704-9842-13ae5a729073-721413.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1721531712314-da14e416-8e4e-4283-862c-a9416aa3a446-572528.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1721531820822-3fca6a90-c152-4258-9fd6-edf63166c877-823297.png">
<meta property="og:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1721532010959-1aaf41bd-4461-4dea-a80d-a65f1c851cfe-797084.png">
<meta property="article:published_time" content="2025-01-19T05:56:47.000Z">
<meta property="article:modified_time" content="2026-01-19T06:47:57.197Z">
<meta property="article:author" content="chaye">
<meta property="article:tag" content="misc">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/img/49277317_Q5542BIfgUtALiTb/1715076716049-7e2771f9-ca09-40ea-8603-0d6a138ae21b-178881.png">
  
  
  
  <title>杂项总结 - chaye的博客</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>chaye</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="杂项总结"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-01-19 13:56" pubdate>
          January 19, 2025 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          5.2k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          44 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">杂项总结</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="杂项总结"><a href="#杂项总结" class="headerlink" title="杂项总结"></a>杂项总结</h1><h1 id="杂项"><a href="#杂项" class="headerlink" title="杂项"></a>杂项</h1><h2 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h2><h3 id="萌新题1"><a href="#萌新题1" class="headerlink" title="萌新题1"></a>萌新题1</h3><p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715076716049-7e2771f9-ca09-40ea-8603-0d6a138ae21b-178881.png" srcset="/img/loading.gif" lazyload alt="1715076716049-7e2771f9-ca09-40ea-8603-0d6a138ae21b.png">大写字母就是flag，写个简单脚本</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;string.h&gt;</span></span><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">char</span> s[<span class="hljs-number">1000</span>]=&#123;<span class="hljs-string">&#x27;\0&#x27;</span>&#125;;<br>    gets(s);<br>    <span class="hljs-type">int</span> len=<span class="hljs-built_in">strlen</span>(s);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;len;i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(s[i]&gt;=<span class="hljs-string">&#x27;A&#x27;</span> &amp;&amp; s[i]&lt;=<span class="hljs-string">&#x27;Z&#x27;</span>)<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%c&quot;</span>,s[i]);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715076761369-298a4100-0f01-4b1d-ab66-e1d8851961f4-767259.png" srcset="/img/loading.gif" lazyload alt="1715076761369-298a4100-0f01-4b1d-ab66-e1d8851961f4.png"></p>
<h1 id="ZIP伪加密解析"><a href="#ZIP伪加密解析" class="headerlink" title="ZIP伪加密解析"></a><font style="color:rgb(51, 51, 51);">ZIP伪加密解析</font></h1><h2 id="1、zip组成"><a href="#1、zip组成" class="headerlink" title="1、zip组成"></a><font style="color:rgb(51, 51, 51);">1、zip组成</font></h2><p><font style="color:rgb(51, 51, 51);">一个 ZIP 文件由三个部分组成：压缩源文件数据区+压缩源文件目录区+压缩源文件目录结束标志。</font></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/wclxyn/article/details/7288994"><font style="color:rgb(33, 37, 41);">一个zip文件由这样三个部分组成_zip 文件结构_一只独孤的程序猿的博客-CSDN博客</font></a></p>
<h2 id="2、实例"><a href="#2、实例" class="headerlink" title="2、实例"></a><font style="color:rgb(51, 51, 51);">2、实例</font></h2><p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715080319355-6dcd924b-4078-4eb9-a5e9-76d4f3a22d16-463995.png" srcset="/img/loading.gif" lazyload alt="1715080319355-6dcd924b-4078-4eb9-a5e9-76d4f3a22d16.png"></p>
<p><strong><font style="color:rgb(51, 51, 51);">压缩源文件数据区：</font></strong><font style="color:rgb(51, 51, 51);"><br></font><font style="color:rgb(51, 51, 51);">50 4B 03 04：这是头文件标记（0x04034b50）<br></font><font style="color:rgb(51, 51, 51);">14 00：解压文件所需 pkware 版本<br></font><font style="color:rgb(51, 51, 51);">00 00：全局方式位标记（有无加密）</font><font style="color:rgb(51, 51, 51);"> </font><strong><font style="color:rgb(51, 51, 51);">头文件标记后2bytes</font></strong><font style="color:rgb(51, 51, 51);"><br></font><strong><font style="color:rgb(51, 51, 51);">压缩源文件目录区：</font></strong></p>
<p><font style="color:rgb(51, 51, 51);">50 4B 01 02：目录中文件文件头标记(0x02014b50)</font></p>
<p><font style="color:rgb(51, 51, 51);">3F 00：压缩使用的 pkware 版本</font></p>
<p><font style="color:rgb(51, 51, 51);">14 00：解压文件所需 pkware 版本<br></font><font style="color:rgb(51, 51, 51);">00 00：全局方式位标记（有无加密，伪加密的关键）</font><font style="color:rgb(51, 51, 51);"> </font><strong><font style="color:rgb(51, 51, 51);">目录文件标记后4bytes</font></strong><font style="color:rgb(51, 51, 51);"><br></font><strong><font style="color:rgb(51, 51, 51);">压缩源文件目录结束标志：</font></strong><font style="color:rgb(51, 51, 51);"><br></font><font style="color:rgb(51, 51, 51);">50 4B 05 06：目录结束标记</font></p>
<h2 id="3、全局方式位标记"><a href="#3、全局方式位标记" class="headerlink" title="3、全局方式位标记"></a><font style="color:rgb(51, 51, 51);">3、全局方式位标记</font></h2><p><font style="color:rgb(51, 51, 51);">全局方式位标记的四个数字中只有第二个数字对其有影响，其它的不管为何值，都不影响它的加密属性！<br></font><strong><font style="color:rgb(51, 51, 51);">第二个数字为奇数时 –&gt;加密</font></strong><font style="color:rgb(51, 51, 51);"><br></font><strong><font style="color:rgb(51, 51, 51);">第二个数字为偶数时 –&gt;未加密</font></strong></p>
<h2 id="4、辨别zip是真加密还是伪加密"><a href="#4、辨别zip是真加密还是伪加密" class="headerlink" title="4、辨别zip是真加密还是伪加密"></a><font style="color:rgb(51, 51, 51);">4、辨别zip是真加密还是伪加密</font></h2><h3 id="1）无加密"><a href="#1）无加密" class="headerlink" title="1）无加密"></a><font style="color:rgb(51, 51, 51);">1）无加密</font></h3><p><font style="color:rgb(51, 51, 51);">压缩源文件数据区的全局加密应当为</font><font style="color:rgb(192, 52, 29);background-color:rgb(251, 229, 225);">00 00</font><font style="color:rgb(51, 51, 51);"> </font><font style="color:rgb(51, 51, 51);">（504B0304两个bytes之后）<br></font><font style="color:rgb(51, 51, 51);">且压缩源文件目录区的全局方式位标记应当为</font><font style="color:rgb(192, 52, 29);background-color:rgb(251, 229, 225);">00 00</font><font style="color:rgb(51, 51, 51);">（504B0304四个bytes之后）</font></p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715080319328-03d43b8d-5052-4baa-b2eb-195421aaf04c-080697.png" srcset="/img/loading.gif" lazyload alt="1715080319328-03d43b8d-5052-4baa-b2eb-195421aaf04c.png"></p>
<h3 id="2）伪加密"><a href="#2）伪加密" class="headerlink" title="2）伪加密"></a><font style="color:rgb(51, 51, 51);">2）伪加密</font></h3><p><font style="color:rgb(51, 51, 51);">压缩源文件数据区的全局加密应当为</font><font style="color:rgb(192, 52, 29);background-color:rgb(251, 229, 225);">00 00</font><font style="color:rgb(51, 51, 51);"><br></font><font style="color:rgb(51, 51, 51);">且压缩源文件目录区的全局方式位标记应当为</font><font style="color:rgb(192, 52, 29);background-color:rgb(251, 229, 225);">09 00</font></p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715080319328-1e9272a7-c29d-4a5e-86d9-5b74ceb71adb-199725.png" srcset="/img/loading.gif" lazyload alt="1715080319328-1e9272a7-c29d-4a5e-86d9-5b74ceb71adb.png"></p>
<h3 id="3）真加密"><a href="#3）真加密" class="headerlink" title="3）真加密"></a><font style="color:rgb(51, 51, 51);">3）真加密</font></h3><p><font style="color:rgb(51, 51, 51);">压缩源文件数据区的全局加密应当为</font><font style="color:rgb(192, 52, 29);background-color:rgb(251, 229, 225);">09 00</font><font style="color:rgb(51, 51, 51);"><br></font><font style="color:rgb(51, 51, 51);">且压缩源文件目录区的全局方式位标记应当为</font><font style="color:rgb(192, 52, 29);background-color:rgb(251, 229, 225);">09 00</font><font style="color:rgb(51, 51, 51);"> </font><font style="color:rgb(51, 51, 51);">!</font></p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715080319344-27b995e7-2657-4e8e-ac7a-8678c9e3f0fb-830660.png" srcset="/img/loading.gif" lazyload alt="1715080319344-27b995e7-2657-4e8e-ac7a-8678c9e3f0fb.png"></p>
<h2 id="例题-1"><a href="#例题-1" class="headerlink" title="例题"></a><font style="color:rgb(33, 37, 41);">例题</font></h2><p><font style="color:rgb(33, 37, 41);">把压缩包拖到winhex里打利用WinHex搜索，快速定位到目录区头文件标记处开，50 4B 03 04，这是压缩源文件数据区头文件标记，50 4B 01 02，这是压缩源文件目录区头文件标记，以50为第一处，找到第9、10处数值位置，第9处数值如果是奇数就代表有密码，偶数代表无密码</font></p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715080159737-bf7beda1-57f9-4d7b-b94e-369cd0bab969-804414.png" srcset="/img/loading.gif" lazyload alt="1715080159737-bf7beda1-57f9-4d7b-b94e-369cd0bab969.png"></p>
<p>第九位是偶数属于伪加密</p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715080259574-f206e589-159a-4f39-b5d5-eab6ba7198f2-395351.png" srcset="/img/loading.gif" lazyload alt="1715080259574-f206e589-159a-4f39-b5d5-eab6ba7198f2.png"></p>
<p>把09 00 改成00 00保存后就能打开了</p>
<h1 id="010、winhex修改图片格式"><a href="#010、winhex修改图片格式" class="headerlink" title="010、winhex修改图片格式"></a>010、winhex修改图片格式</h1><p><font style="color:rgb(77, 77, 77);">从第二行开始，前四位是宽，后四位是高。</font></p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715080729487-4959214d-7808-42fe-81ca-89fa501f1255-656299.png" srcset="/img/loading.gif" lazyload alt="1715080729487-4959214d-7808-42fe-81ca-89fa501f1255.png"></p>
<h2 id="例题1-修改高度"><a href="#例题1-修改高度" class="headerlink" title="例题1 修改高度"></a>例题1 修改高度</h2><p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715081138945-05411f70-0c96-439a-942a-b85b886b4c58-148233.png" srcset="/img/loading.gif" lazyload alt="1715081138945-05411f70-0c96-439a-942a-b85b886b4c58.png"></p>
<p>把后面的的01改成02就可以增加高度，改成00就减小高度</p>
<p>不知道为什么前面的宽度改不了，改了会变成乱码（将01改成02）</p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715081597458-73401b1b-a0a0-4296-ad59-46dee88c64ae-411427.png" srcset="/img/loading.gif" lazyload alt="1715081597458-73401b1b-a0a0-4296-ad59-46dee88c64ae.png"></p>
<h2 id="例题2-修改宽度"><a href="#例题2-修改宽度" class="headerlink" title="例题2 修改宽度"></a>例题2 修改宽度</h2><p>将03改成02，下调一个度，就可以看到flag啦</p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715081659947-32ed728f-cd1c-4852-a3d3-040d983e483f-983767.png" srcset="/img/loading.gif" lazyload alt="1715081659947-32ed728f-cd1c-4852-a3d3-040d983e483f.png"></p>
<h1 id="JPHS的使用"><a href="#JPHS的使用" class="headerlink" title="JPHS的使用"></a>JPHS的使用</h1><p>准备阶段：</p>
<p> 有windows和Linux版本的，windows版有可视化界面</p>
<p>windows可视化界面的下载地址：</p>
<p>Download for Free JPHS for Windows 0.5 (scanwith.com)</p>
<p>GitHub下载地址：</p>
<p>h3xx&#x2F;jphs: jphide &amp; seek steganography tools (github.com)</p>
<p>使用对象：</p>
<p>从名字不难看出使用对象是JPEG文件（就是常见的.jpg文件）</p>
<p>简介：JPEG是联合图象专家组(Joint Picture Expert Group)的英文缩写，是国际标准化组织(ISO)和CCITT联合制定的静态图象的压缩编码标准，比相同图象质量的其它文件格式（静态图象）相比压缩比最高的（高压缩比）</p>
<p>JPHS介绍：</p>
<p>对有损压缩JPEG文件进行信息的加密隐藏、探测提取的工具</p>
<p>JPHS包含2个功能（靠2个程序实现）：</p>
<p>JPHIDE：能够将信息文件加密隐藏到JPEG图像</p>
<p>JPSEEK：从用JPHIDE程序加密隐藏得到的JPEG图像中探测并提取到信息文件</p>
<p>隐藏文件：</p>
<p> 第一步：准备文件</p>
<p>(test.jpg文件)+（test.txt文本）</p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715082527848-11d91933-aacc-4aa3-96ec-5074f16bf28d-509357.png" srcset="/img/loading.gif" lazyload alt="1715082527848-11d91933-aacc-4aa3-96ec-5074f16bf28d.png"></p>
<p>第二步：（windows版本） 打开软件，点击“Open jpeg”</p>
<p>使用图形化操作界面的Jphs（Windows版本）——-&gt;点击“Open jpeg”打开JPEG格式图片</p>
<p>（我这里打开的test.jpg）</p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715082538254-603d3adb-0722-4f01-a14c-2683ee60669c-805285.png" srcset="/img/loading.gif" lazyload alt="1715082538254-603d3adb-0722-4f01-a14c-2683ee60669c.png"></p>
<p>打开之后有按钮就不是灰色的了</p>
<p>并且还会显示JPEG文件的相关信息</p>
<p>(注：如果打开的不是JPEG文件会自动退出)</p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715082552004-07a3c180-683a-4faa-bb84-290164ee0797-937598.png" srcset="/img/loading.gif" lazyload alt="1715082552004-07a3c180-683a-4faa-bb84-290164ee0797.png"></p>
<p>第三步：点击“Hide”，并输入密码</p>
<p>点击“Hide”后输入2次相同的密码，并点击ok</p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715082564963-de35d817-833c-4db5-a0b5-4a70530a261e-695449.png" srcset="/img/loading.gif" lazyload alt="1715082564963-de35d817-833c-4db5-a0b5-4a70530a261e.png"></p>
<p>然后选择要隐藏进去的文件</p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715082579844-11749991-5770-4311-90ae-3775379d3fe9-507394.png" srcset="/img/loading.gif" lazyload alt="1715082579844-11749991-5770-4311-90ae-3775379d3fe9.png"></p>
<p> 选择之后会在第二个Hidden中显示相关信息</p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715082588509-45d8fd03-66d1-4777-ac9b-c87c2b6ceed1-408260.png" srcset="/img/loading.gif" lazyload alt="1715082588509-45d8fd03-66d1-4777-ac9b-c87c2b6ceed1.png"></p>
<p>第三步：将他们合并，并另存为</p>
<p>点击“Save jpeg as”将图片另存为jpeg格式然后输入自己想输入的名字.jpg</p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715082607181-8db66ec8-3f7b-42b2-aa51-b46859510838-099887.png" srcset="/img/loading.gif" lazyload alt="1715082607181-8db66ec8-3f7b-42b2-aa51-b46859510838.png"></p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715082633923-c9fa024e-d24b-4dbd-b3fb-e0e541719852-887810.png" srcset="/img/loading.gif" lazyload alt="1715082633923-c9fa024e-d24b-4dbd-b3fb-e0e541719852.png"></p>
<p> the file you hid in this jpeg has caused statistically significant change and may be detectable</p>
<p>您在此JPEG中隐藏的文件导致统计上显着的变化，可能是可检测的</p>
<p>提取隐藏文件：</p>
<p> （注：对图片的隐写方式和密码都一无所知的时候，使用Stegdetect进行探测和破解）</p>
<p>我们这里知道，就可以直接提取吧<img src="/./img/49277317_Q5542BIfgUtALiTb/1715082644847-6542cc8d-ed0a-4663-b2c8-59ea29496671-644232.png" srcset="/img/loading.gif" lazyload alt="1715082644847-6542cc8d-ed0a-4663-b2c8-59ea29496671.png"></p>
<p>显示出信息就是打开成功了</p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715082652439-5f0fecf2-3eec-4240-806e-ae1e54f70b12-365576.png" srcset="/img/loading.gif" lazyload alt="1715082652439-5f0fecf2-3eec-4240-806e-ae1e54f70b12.png"></p>
<p>点击seek，再输入密码进行提取</p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715082685375-989806db-8a59-4ab6-9d67-867dcda5283a-376214.png" srcset="/img/loading.gif" lazyload alt="1715082685375-989806db-8a59-4ab6-9d67-867dcda5283a.png"></p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715082692133-5a26e5ac-afe8-4814-bb34-cc62ab67c9f1-056413.png" srcset="/img/loading.gif" lazyload alt="1715082692133-5a26e5ac-afe8-4814-bb34-cc62ab67c9f1.png"></p>
<p> 已经提取到了（和隐藏进去的进行对比，是一样的）</p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715082707161-b0d1b22a-6e8e-4e05-9ce1-87f5f332f5eb-671681.png" srcset="/img/loading.gif" lazyload alt="1715082707161-b0d1b22a-6e8e-4e05-9ce1-87f5f332f5eb.png"></p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715082714951-c4ba2def-dea0-4768-9bf1-65a6ac81044e-758415.png" srcset="/img/loading.gif" lazyload alt="1715082714951-c4ba2def-dea0-4768-9bf1-65a6ac81044e.png"></p>
<h2 id="例题-2"><a href="#例题-2" class="headerlink" title="例题"></a>例题</h2><p>获得一个jpg文件，打开然后保存为txt文件，再存为png文件</p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715083184886-15f6ff7e-feec-4719-b9de-7015742403f3-546256.png" srcset="/img/loading.gif" lazyload alt="1715083184886-15f6ff7e-feec-4719-b9de-7015742403f3.png"></p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715083222397-7684b0f2-64c4-4305-8181-03fbf4363b53-153216.png" srcset="/img/loading.gif" lazyload alt="1715083222397-7684b0f2-64c4-4305-8181-03fbf4363b53.png"></p>
<p><font style="color:#DF2A3F;">然后请看二维码解密部分</font></p>
<h1 id="PNG文件格式详解"><a href="#PNG文件格式详解" class="headerlink" title="PNG文件格式详解"></a><font style="color:rgb(34, 34, 38);">PNG文件格式详解</font></h1><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a><font style="color:rgb(79, 79, 79);">概述</font></h3><p><font style="color:rgb(77, 77, 77);">PNG是20世纪90年代中期开始开发的图像文件存储格式，其目的是替代GIF和</font><a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=TIFF&spm=1001.2101.3001.7020">TIFF</a><font style="color:rgb(77, 77, 77);">文件格式，同时增加一些GIF文件格式所不具备的特性。流式网络图形格式(Portable Network Graphic Format，PNG)名称来源于非官方的“PNG’s Not GIF”，是一种位图文件(bitmap file)存储格式，读成“ping”。PNG用来存储灰度图像时，灰度图像的深度可多到16位，存储彩色图像时，彩色图像的深度可多到48位，并且还可存储多到16位的α通道数据。PNG使用从LZ77派生的无损数据压缩算法。（说白了这就是一种方便的、适于网络传播的轻便图片文件格式）</font></p>
<h3 id="特性"><a href="#特性" class="headerlink" title="特性"></a><font style="color:rgb(79, 79, 79);">特性</font></h3><ol>
<li><font style="color:rgb(51, 51, 51);">使用调色板技术可支持256种颜色的彩色图像。（必须的）</font></li>
<li><font style="color:rgb(51, 51, 51);">流式读&#x2F;写性(streamability)：图像文件格式允许连续读出和写入图像数据。（因此适于网络传播）</font></li>
<li><font style="color:rgb(51, 51, 51);">逐次逼近显示(progressive display)：这种特性可使在通信链路上传输图像文件的同时就在终端上显示图像，把整个轮廓显示出来之后逐步显示图像的细节，也就是先用低分辨率显示图像，然后逐步提高它的分辨率。（类似马赛克逐渐消除的过程）</font></li>
<li><font style="color:rgb(51, 51, 51);">透明性(transparency)：这个性能可使图像中某些部分不显示出来，用来创建一些有特色的图像。</font></li>
<li><font style="color:rgb(51, 51, 51);">辅助信息(ancillary information)：这个特性可用来在图像文件中存储一些文本注释信息。（就是可以说一些废话）</font></li>
<li><font style="color:rgb(51, 51, 51);">独立于计算机软硬件环境。</font></li>
<li><font style="color:rgb(51, 51, 51);">使用无损压缩。（无损！）</font></li>
<li><font style="color:rgb(51, 51, 51);">可在一个文件中存储多幅图像。</font></li>
</ol>
<h3 id="文件结构"><a href="#文件结构" class="headerlink" title="文件结构"></a><font style="color:rgb(79, 79, 79);">文件结构</font></h3><p><font style="color:rgb(77, 77, 77);">PNG图像格式文件由文件署名和数据块(chunk)组成。</font></p>
<h4 id="文件署名域"><a href="#文件署名域" class="headerlink" title="文件署名域"></a><font style="color:rgb(79, 79, 79);">文件署名域</font></h4><p><font style="color:rgb(77, 77, 77);">8字节的PNG文件署名域用来识别该文件是不是PNG文件。该域的值是：</font></p>
<table>
<thead>
<tr>
<th align="left"><strong><font style="color:rgb(79, 79, 79);">十进制数</font></strong></th>
<th align="left"><strong><font style="color:rgb(79, 79, 79);">十六进制数</font></strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><font style="color:rgb(79, 79, 79);">137</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">89</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">80</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">50</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">78</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">4e</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">71</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">47</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">13</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">0d</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">10</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">0a</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">26</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">1a</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">10</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">0a</font></td>
</tr>
</tbody></table>
<p><font style="color:rgb(77, 77, 77);">这个文件署名就是在</font><a target="_blank" rel="noopener" href="https://blog.mythsman.com/2015/12/01/1/">《利用文件头标志判断文件类型》</a><font style="color:rgb(77, 77, 77);">中提到的文件头标志了，很简单。</font></p>
<h4 id="数据块"><a href="#数据块" class="headerlink" title="数据块"></a><font style="color:rgb(79, 79, 79);">数据块</font></h4><p><font style="color:rgb(77, 77, 77);">这里有两种类型的数据块，一种是称为关键数据块(critical chunk)，就是必须要有的块；另一种叫做辅助数据块(ancillary chunks)。</font></p>
<p><font style="color:rgb(77, 77, 77);">每个数据块都由下表所示的的4个域组成。</font></p>
<table>
<thead>
<tr>
<th align="left"><strong><font style="color:rgb(79, 79, 79);">名称</font></strong></th>
<th align="left"><strong><font style="color:rgb(79, 79, 79);">字节数</font></strong></th>
<th align="left"><strong><font style="color:rgb(79, 79, 79);">说明</font></strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><font style="color:rgb(79, 79, 79);">Length(长度)</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">4字节</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">指定数据块中数据域的长度，其长度不超过(231−1)(231−1)字节</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">Chunk Type Code(数据块类型码)</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">4字节</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">数据块类型码由ASCII字母(A-Z和a-z)组成</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">Chunk Data(数据块实际内容</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">可变长度</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">存储按照Chunk Type Code指定的数据</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">CRC(循环冗余检测</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">4字节</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">存储用来检测是否有错误的循环冗余码</font></td>
</tr>
</tbody></table>
<p><font style="color:rgb(77, 77, 77);">其中CRC(cyclic redundancy check)域中的值是对Chunk Type Code域和Chunk Data域中的数据进行计算得到的，可以看做一种校验码。</font></p>
<h4 id="关键数据块"><a href="#关键数据块" class="headerlink" title="关键数据块"></a><font style="color:rgb(79, 79, 79);">关键数据块</font></h4><p><font style="color:rgb(77, 77, 77);">关键数据块中的4个标准数据块是：</font></p>
<p><font style="color:rgb(77, 77, 77);">(1) 文件头数据块IHDR(header chunk)：</font></p>
<p><font style="color:rgb(77, 77, 77);">它包含有PNG文件中存储的图像数据的基本信息，并要作为第一个数据块出现在PNG数据流中，而且一个PNG数据流中只能有一个文件头数据块。</font></p>
<p><font style="color:rgb(77, 77, 77);">文件头数据块由13字节，组成结构如下：</font></p>
<table>
<thead>
<tr>
<th align="left"><strong><font style="color:rgb(79, 79, 79);">域的名称</font></strong></th>
<th align="left"><strong><font style="color:rgb(79, 79, 79);">字节数</font></strong></th>
<th align="left"><strong><font style="color:rgb(79, 79, 79);">说明</font></strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><font style="color:rgb(79, 79, 79);">Width</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">4 bytes</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">图像宽度，以像素为单位</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">Height</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">4 bytes</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">图像高度，以像素为单位</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">Bit depth</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">1 byte</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">图像深度：索引彩色图像：1，2，4或8 ;灰度图像：1，2，4，8或16 ;真彩色图像：8或16</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">ColorType</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">1 byte</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">颜色类型：0：灰度图像, 1，2，4，8或16;2：真彩色图像，8或16;3：索引彩色图像，1，2，4或84：带α通道数据的灰度图像，8或16;6：带α通道数据的真彩色图像，8或16</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">Compression method</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">1 byte</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">压缩方法(LZ77派生算法)</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">Filter method</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">1 byte</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">滤波器方法</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">Interlace method</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">1 byte</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">隔行扫描方法：0：非隔行扫描;1： Adam7(由Adam M. Costello开发的7遍隔行扫描方法)</font></td>
</tr>
</tbody></table>
<p><font style="color:rgb(77, 77, 77);">(2) 调色板数据块PLTE(palette chunk)：</font></p>
<p><font style="color:rgb(77, 77, 77);">它包含有与索引彩色图像((indexed-color image))相关的彩色变换数据，它仅与索引彩色图像有关，而且要放在图像数据块(image data chunk)之前。真彩色的PNG数据流也可以有调色板数据块，目的是便于非真彩色显示程序用它来量化图像数据，从而显示该图像。结构如下：</font></p>
<p><font style="color:rgb(77, 77, 77);">|颜色|字节|意义|<br></font><font style="color:rgb(77, 77, 77);">|Red|1 byte||0 &#x3D; 黑色, 255 &#x3D; 红|<br></font><font style="color:rgb(77, 77, 77);">|Green|1 byte||0 &#x3D; 黑色, 255 &#x3D; 绿色|<br></font><font style="color:rgb(77, 77, 77);">|Blue|1 byte||0 &#x3D; 黑色, 255 &#x3D; 蓝色|</font></p>
<p><font style="color:rgb(77, 77, 77);">PLTE数据块是定义图像的调色板信息，PLTE可以包含1~256个调色板信息，每一个调色板信息由3个字节组成，因此调色板数据块所包含的最大字节数为768，调色板的长度应该是3的倍数，否则，这将是一个非法的调色板。</font></p>
<p><font style="color:rgb(77, 77, 77);">对于索引图像，调色板信息是必须的，调色板的颜色索引从0开始编号，然后是1、2……，调色板的颜色数不能超过色深中规定的颜色数（如图像色深为4的时候，调色板中的颜色数不可以超过2^4&#x3D;16），否则，这将导致PNG图像不合法。</font></p>
<p><font style="color:rgb(77, 77, 77);">(3) 图像数据块IDAT(image data chunk)：</font></p>
<p><font style="color:rgb(77, 77, 77);">它存储实际的数据，在数据流中可包含多个连续顺序的图像数据块。</font></p>
<p><font style="color:rgb(77, 77, 77);">IDAT存放着图像真正的数据信息，因此，如果能够了解IDAT的结构，我们就可以很方便的生成PNG图像。</font></p>
<p><font style="color:rgb(77, 77, 77);">(4) 图像结束数据IEND(image trailer chunk)：</font></p>
<p><font style="color:rgb(77, 77, 77);">它用来标记PNG文件或者数据流已经结束，并且必须要放在文件的尾部。</font></p>
<p><font style="color:rgb(77, 77, 77);">如果我们仔细观察PNG文件，我们会发现，文件的结尾12个字符看起来总应该是这样的：</font></p>
<p><font style="color:rgb(77, 77, 77);">00 00 00 00 49 45 4E 44 AE 42 60 82</font></p>
<p><font style="color:rgb(77, 77, 77);">不难明白，由于数据块结构的定义，IEND数据块的长度总是0（00 00 00 00，除非人为加入信息），数据标识总是IEND（49 45 4E 44），因此，CRC码也总是AE 42 60 82。</font></p>
<p><font style="color:rgb(77, 77, 77);">最后，除了表示数据块开始的IHDR必须放在最前面， 表示PNG文件结束的IEND数据块放在最后面之外，其他数据块的存放顺序没有限制。</font></p>
<h4 id="辅助数据块"><a href="#辅助数据块" class="headerlink" title="辅助数据块"></a><font style="color:rgb(79, 79, 79);">辅助数据块</font></h4><p><font style="color:rgb(77, 77, 77);">（比较杂，不需要全部了解透）</font></p>
<p><font style="color:rgb(77, 77, 77);">PNG文件格式规范制定的10个辅助数据块是：</font></p>
<ol>
<li><font style="color:rgb(51, 51, 51);">背景颜色数据块bKGD(background color)。</font></li>
<li><font style="color:rgb(51, 51, 51);">基色和白色度数据块cHRM(primary chromaticities and white point)。所谓白色度是指当R＝G＝B＝最大值时在显示器上产生的白色度。</font></li>
<li><font style="color:rgb(51, 51, 51);">图像γ数据块gAMA(image gamma)。</font></li>
<li><font style="color:rgb(51, 51, 51);">图像直方图数据块hIST(image histogram)。</font></li>
<li><font style="color:rgb(51, 51, 51);">物理像素尺寸数据块pHYs(physical pixel dimensions)。</font></li>
<li><font style="color:rgb(51, 51, 51);">样本有效位数据块sBIT(significant bits)。</font></li>
<li><font style="color:rgb(51, 51, 51);">文本信息数据块tEXt(textual data)。</font></li>
<li><font style="color:rgb(51, 51, 51);">图像最后修改时间数据块tIME (image last-modification time)。</font></li>
<li><font style="color:rgb(51, 51, 51);">图像透明数据块tRNS (transparency)。</font></li>
<li><font style="color:rgb(51, 51, 51);">压缩文本数据块zTXt (compressed textual data)。</font></li>
</ol>
<h4 id="数据块摘要"><a href="#数据块摘要" class="headerlink" title="数据块摘要"></a><font style="color:rgb(79, 79, 79);">数据块摘要</font></h4><p><font style="color:rgb(77, 77, 77);">关键数据块、辅助数据块和专用公共数据块(special-purpose public chunks)综合下表中：</font></p>
<table>
<thead>
<tr>
<th align="left"><strong><font style="color:rgb(79, 79, 79);">数据块符号</font></strong></th>
<th align="left"><strong><font style="color:rgb(79, 79, 79);">数据块名称</font></strong></th>
<th align="left"><strong><font style="color:rgb(79, 79, 79);">多数据块</font></strong></th>
<th align="left"><strong><font style="color:rgb(79, 79, 79);">可选否</font></strong></th>
<th align="left"><strong><font style="color:rgb(79, 79, 79);">位置限制</font></strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><font style="color:rgb(79, 79, 79);">IHDR</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">文件头数据块</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">否</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">否</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">第一块</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">cHRM</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">基色和白色点数据块</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">否</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">是</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">在PLTE和IDAT之前</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">gAMA</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">图像γ数据块</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">否</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">是</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">在PLTE和IDAT之前</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">sBIT</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">样本有效位数据块</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">否</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">是</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">在PLTE和IDAT之前</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">PLTE</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">调色板数据块</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">否</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">是</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">在IDAT之前</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">bKGD</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">背景颜色数据块</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">否</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">是</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">在PLTE之后IDAT之前</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">hIST</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">图像直方图数据块</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">否</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">是</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">在PLTE之后IDAT之前</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">tRNS</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">图像透明数据块</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">否</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">是</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">在PLTE之后IDAT之前</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">oFFs</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">(专用公共数据块)</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">否</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">是</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">在IDAT之前</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">pHYs</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">物理像素尺寸数据块</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">否</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">是</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">在IDAT之前</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">sCAL</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">(专用公共数据块)</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">否</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">是</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">在IDAT之前</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">IDAT</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">图像数据块</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">是</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">否</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">与其他IDAT连续</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">tIME</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">图像最后修改时间数据块</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">否</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">是</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">无限制</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">tEXt</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">文本信息数据块</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">是</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">是</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">无限制</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">zTXt</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">压缩文本数据块</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">是</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">是</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">无限制</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">fRAc</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">(专用公共数据块)</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">是</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">是</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">无限制</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">gIFg</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">(专用公共数据块)</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">是</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">是</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">无限制</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">gIFt</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">(专用公共数据块)</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">是</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">是</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">无限制</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">gIFx</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">(专用公共数据块)</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">是</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">是</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">无限制</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">IEND</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">图像结束数据</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">否</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">否</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">最后一个数据块</font></td>
</tr>
</tbody></table>
<p><font style="color:rgb(77, 77, 77);">tEXt和zTXt数据块中的标准关键字：</font></p>
<table>
<thead>
<tr>
<th align="left"><strong><font style="color:rgb(79, 79, 79);">关键字</font></strong></th>
<th align="left"><strong><font style="color:rgb(79, 79, 79);">说明</font></strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><font style="color:rgb(79, 79, 79);">Title</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">图像名称或者标题</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">Author</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">图像作者名</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">Description</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">图像说明</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">Copyright</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">版权声明</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">CreationTime</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">原图创作时间</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">Software</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">创作图像使用的软件</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">Disclaimer</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">弃权</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">Warning</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">图像内容警告</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">Source</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">创作图像使用的设备</font></td>
</tr>
<tr>
<td align="left"><font style="color:rgb(79, 79, 79);">Comment</font></td>
<td align="left"><font style="color:rgb(79, 79, 79);">各种注释</font></td>
</tr>
</tbody></table>
<h3 id="一个例子"><a href="#一个例子" class="headerlink" title="一个例子"></a><font style="color:rgb(79, 79, 79);">一个例子</font></h3><p><font style="color:rgb(77, 77, 77);">为了便于研究，我在本地找了个24x24像素的图片：</font></p>
<p><font style="color:rgb(77, 77, 77);">用十六进制打开后是这样的：</font></p>
<p>| <code>plain 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 </code>  | <code>plain 0000000: 8950 4e47 0d0a 1a0a 0000 000d 4948 4452  .PNG........IHDR 0000010: 0000 0018 0000 0018 0806 0000 00e0 773d  ..............w= 0000020: f800 0000 1974 4558 7453 6f66 7477 6172  .....tEXtSoftwar 0000030: 6500 4164 6f62 6520 496d 6167 6552 6561  e.Adobe ImageRea 0000040: 6479 71c9 653c 0000 0344 4944 4154 78da  dyq.e&lt;...DIDATx. 0000050: b454 4b48 5b51 10bd 792f 2646 a346 7411  .TKH[Q..y/&amp;F.Ft. 0000060: 450b cac3 6840 8c14 0242 8542 e9aa ab42  E...h@...B.B...B 0000070: 5785 8614 c428 b4d0 5569 b108 5dbb 29b4  W....(..Ui..].). 0000080: 1b05 a5ab 6cb3 2a14 0ab5 8b42 75a3 d188  ....l.*....Bu... 0000090: 82c6 0ff1 4320 a2e2 2f7e 12ed 9c47 e671  ....C ../~...G.q 00000a0: 8d2f 8950 3a30 dcc7 bb33 67e6 cee7 5826  ./.P:0...3g...X&amp; 00000b0: 2626 8499 288a a2ab d56a d555 55d5 57d7  &amp;&amp;..(....j.UU.W. 00000c0: d7d7 be6c 36fb fef2 f232 45a7 b8ba ba12  ...l6....2E..... 00000d0: c160 5014 13ab d94f 8bc5 72e3 24e0 1e9f  .`P....O..r.$... 00000e0: cff7 b9ae ae4e 4c4e 4eda 3299 4c00 777c  .....NLNN.2.L.w| 00000f0: 5f4c 1472 16f9 9a07 2e6a 6b6b 875a 5b5b  _L.r.....jkk.Z[[ 0000100: 454d 4d8d e8ea ea7a 4eff 3ce2 8ea2 3018  EMM....zN.&lt;...0. 0000110: 94cb c28a 7f04 765f d3b4 27ec d0d8 d8a8  ......v_..&#39;..... 0000120: 5655 55bd 639b 9201 a8b6 a8af 516b 9bcd  VUU.c.......Qk.. 0000130: 26ca caca f46f 0020 7bb7 db6d 38d8 ed76  &amp;....o. &#123;..m8..v 0000140: d1d1 d1f1 82ee 34d8 940c 0023 00c2 11e0  ......4....#.... 0000150: 1c20 975d 2781 3d75 381c 379c 9a9b 9b55  . .]&#39;.=u8.7....U 0000160: 2ad7 1012 bb73 0028 c073 1373 8f02 3c68  *....s.(.s.s..&lt;h 0000170: 6b6b fb44 25b9 e554 5e5e 2eba bbbb f18a  kk.D%..T^^...... 0000180: c791 4844 2b16 c012 0e87 fd04 faac bebe  ..HD+........... 0000190: be85 cad1 e272 b97c 04a0 e245 4ea7 530f  .....r.|...EN.S. 00001a0: 5c48 8e8f 8f45 3a9d d6f5 f0f0 7091 747b  \H...E:.....p.t&#123; 00001b0: 7777 779d feff a649 0b07 0281 acb5 baba  www....I........ 00001c0: fa97 dfef 7710 7041 309e 2c79 ba20 4800  ....w.pA0.,y. H. 00001d0: 9a13 2f81 7a11 7479 79b9 3f16 8ba1 ae63  ../.z.tyy.?....c 00001e0: caf9 f979 120b 83c5 81e6 03e3 8e4f 59e5  ...y.........OY. 00001f0: a010 5e3c f405 2705 dbd6 7b90 4aa5 1ecd  ..^&lt;..&#39;...&#123;.J... 0000200: cdcd 250e 0e0e c4c5 c585 a080 fa49 0686  ..%..........I.. 0000210: 1303 ca81 7007 1bf6 c1f7 d9d9 9958 5b5b  ....p........X[[ 0000220: 1384 f73a 140a 7de3 3d58 27e9 8d46 a371  ...:..&#125;.=X&#39;..F.q 0000230: 0491 c14a 89fc 1204 01f8 d4d4 1461 87be  ...J.........a.. 0000240: e46f 7262 6363 a377 6666 6671 6f6f cfc8  .orbcc.wfffqoo.. 0000250: dc6c cb65 651b 3439 1e8f 03bc 8fc0 c70a  .l.ee.49........ 0000260: 5145 3291 483c 5c58 5888 a251 a5c0 5989  QE2.H&lt;\XX..Q..Y. 0000270: f8c4 d6d6 5676 7a7a fae5 c0c0 c0f8 ad3d  ....Vvzz.......= 0000280: c823 ac14 3df3 c3d1 d191 d1e4 620a 5f94  .#..=.......b._. 0000290: 6673 7333 3238 38f8 b520 9be6 3887 ff79  fss3288.. ..8..y 00002a0: 989b f85f 7e3f e4a4 b0f1 74af 1525 3b36  ..._~?....t..%;6 00002b0: 8423 ed45 6745 4585 012c 4f92 3c41 fc02  .#.EgEE..,O.&lt;A.. 00002c0: d008 ed90 7774 74d4 5694 4df9 248e f182  ....wtt.V.M.$... 00002d0: 3278 4ccd 9aca 8161 039f caca 4a80 9b52  2xL....a....J..R 00002e0: b855 1e49 3a55 32f6 c209 60bc 4068 3aa6  .U.I:U2...`.@h:. 00002f0: 8b1a 9aa6 041c 4429 3a6f 7150 3000 9d9d  ......D):oqP0... 0000300: 641e 33ed 8114 a485 0238 4178 703c 3939  d.3......8Axp&lt;99 0000310: 11c9 6452 acac acfc 248e 798b 9d21 b0e1  ..dR....$.y..!.. 0000320: f6f6 f6fe a6a6 2683 5ec0 5b94 948f eec3  ......&amp;.^.[..... 0000330: 055f c001 3015 5838 64bc baba 1add d9d9  ._..0.X8d....... 0000340: 01f0 0f76 a0cd 7d33 3f3f 3f42 73ff d1e3  ...v..&#125;3???Bs... 0000350: f104 1b1a 1a54 f890 6805 a748 9a92 3fb4  .....T..h..H..?. 0000360: e6df 691f dcfb fbfb 2366 19e5 64fb f4f4  ..i.....#f..d... 0000370: b46f 7676 7664 6969 6998 5ed1 43fd 1837  .ovvvdiii.^.C..7 0000380: a5eb bb50 c2bf 8822 feb3 fc15 6000 74fe  ...P...&quot;....`.t. 0000390: 7622 c159 82da 0000 0000 4945 4e44 ae42  v&quot;.Y......IEND.B 00003a0: 6082 0a                                  `.. </code>  |<br>| — | — |</p>
<p><font style="color:rgb(77, 77, 77);">接下来我们试着分析一下：</font></p>
<p><font style="color:rgb(77, 77, 77);">首先是八个字节的文件头标志，标识着png文件：</font></p>
<table>
<thead>
<tr>
<th><code>plain 1 </code></th>
<th><code>plain 8950 4e47 0d0a 1a0a </code></th>
</tr>
</thead>
</table>
<p><font style="color:rgb(77, 77, 77);">接下来的地方就是IHDR数据块了：</font></p>
<p><font style="color:rgb(77, 77, 77);">0000 000d</font><font style="color:rgb(77, 77, 77);">说明IHDR头块长为13</font></p>
<p><font style="color:rgb(77, 77, 77);">4948 4452</font><font style="color:rgb(77, 77, 77);">IHDR标识（ascii码为IHDR）</font></p>
<p><font style="color:rgb(77, 77, 77);">下面是IHDR数据块的实际内容</font></p>
<p><font style="color:rgb(77, 77, 77);">0000 0018</font><font style="color:rgb(77, 77, 77);">图像的宽，24像素</font></p>
<p><font style="color:rgb(77, 77, 77);">0000 0018</font><font style="color:rgb(77, 77, 77);">图像的高，24像素</font></p>
<p><font style="color:rgb(77, 77, 77);">08</font><font style="color:rgb(77, 77, 77);"> 表示色深，这里是2^8&#x3D;256，即这是一个256色的图像</font></p>
<p><font style="color:rgb(77, 77, 77);">06</font><font style="color:rgb(77, 77, 77);"> 颜色类型，查表可知这是带α通道数据的真彩色图像</font></p>
<p><font style="color:rgb(77, 77, 77);">00</font><font style="color:rgb(77, 77, 77);"> PNG Spec规定此处总为0（非0值为将来使用更好的压缩方法预留），表示使压缩方法(LZ77派生算法)</font></p>
<p><font style="color:rgb(77, 77, 77);">00</font><font style="color:rgb(77, 77, 77);"> 同上</font></p>
<p><font style="color:rgb(77, 77, 77);">00</font><font style="color:rgb(77, 77, 77);"> 非隔行扫描</font></p>
<p><font style="color:rgb(77, 77, 77);">e0 773d f8</font><font style="color:rgb(77, 77, 77);"> CRC校验</font></p>
<p><font style="color:rgb(77, 77, 77);">以上分析了第一个IHDR块的内容，其他块的分析方法类似，比如接下来的就是tEXt块了，很简单，不做分析了。（当然这里还有重要的IDAT块，这是图像的实际内容）</font></p>
<p><font style="color:rgb(77, 77, 77);">最后得有个IEND数据块，这部分正如上所说，通常都应该是</font></p>
<p><font style="color:rgb(77, 77, 77);">00 00 00 00 49 45 4E 44 AE 42 60 82</font></p>
<p><font style="color:rgb(77, 77, 77);">由于我用的是vim打开，vim在文件最后都会恶心的自己加上0a换行，当然这并没有什么坏的影响。不过这也提醒了我们一个问题，既然在IEND块后面添加任何的字符都对文件的打开造成不了影响，那我们就可以在这里藏一些数据了（当然这种藏法很low）。。。</font></p>
<p><font style="color:rgb(77, 77, 77);">OK，这就是png文件的基本构造了。</font></p>
<h2 id="例题：可能会修改文件名"><a href="#例题：可能会修改文件名" class="headerlink" title="例题：可能会修改文件名"></a><font style="color:rgb(77, 77, 77);">例题：可能会修改文件名</font></h2><p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715249478476-fc4500f4-d179-4a9e-8ca3-b739743ed423-562206.png" srcset="/img/loading.gif" lazyload alt="1715249478476-fc4500f4-d179-4a9e-8ca3-b739743ed423.png"></p>
<p>可能是头文件出问题</p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1715249511415-c2ce3779-2cd3-4e8f-bf8a-75c7641c71f1-445904.png" srcset="/img/loading.gif" lazyload alt="1715249511415-c2ce3779-2cd3-4e8f-bf8a-75c7641c71f1.png"></p>
<p>看上面的8个字节头文件标志</p>
<p>89 50 4E 47 0D 0A 1A 0A</p>
<p>改完就可以打开图片了</p>
<h1 id="BPG文件格式详解"><a href="#BPG文件格式详解" class="headerlink" title="BPG文件格式详解"></a>BPG文件格式详解</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>BPG（Better Portable Graphics）是一种新的图像格式。 其目的是在质量或文件大小成问题时替换JPEG图像格式。 它的主要优点是：</p>
<p>1、压缩比高。 对于类似的质量，文件比JPEG小得多。</p>
<p>2、大多数Web浏览器都支持小型Javascript解码器（gzip压缩大小：56 KB）。</p>
<p>3、基于HEVC开放视频压缩标准的子集。</p>
<p>4、支持与JPEG（灰度，YCbCr 4：2：0,4：2：2,4：4：4）相同的色度格式，以减少转换过程中的损耗。 支持Alpha通道。 还支持RGB，YCgCo和CMYK颜色空间。</p>
<p>5、本机支持每通道8至14位，以获得更高的动态范围。</p>
<p>6、支持无损压缩。</p>
<p>7、可以包括各种元数据（例如EXIF，ICC配置文件，XMP）。</p>
<p>8、动画支持。</p>
<p>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/CT_WJ/article/details/97812299">https://blog.csdn.net/CT_WJ&#x2F;article&#x2F;details&#x2F;97812299</a></p>
<h2 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h2><p><font style="color:rgb(77, 77, 77);">只考虑电脑上，Honeyview 是目前我评价最高的看图软件，地址：</font><a target="_blank" rel="noopener" href="https://www.bandisoft.com/honeyview/">www.bandisoft.com/honeyview</a><font style="color:rgb(77, 77, 77);">。截面乍一看有点古朴：</font></p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1721531586323-c3eaaf07-e067-4b09-a548-d29e7041d0ae-716908.png" srcset="/img/loading.gif" lazyload alt="1721531586323-c3eaaf07-e067-4b09-a548-d29e7041d0ae.png"></p>
<p><font style="color:rgb(77, 77, 77);">安装之后设置一下，让菜单自动隐藏就没问题了，实际用的时候只会显示个窗口边框。现在还没遇到它不支持的图片格式，除了矢量图，比如svg 和cad 的格式。</font></p>
<h2 id="转换"><a href="#转换" class="headerlink" title="转换"></a><font style="color:rgb(77, 77, 77);">转换</font></h2><p><font style="color:rgb(77, 77, 77);">图片批量转换成bpg 可以用honeyview 的资源管理器右键菜单，也可以用一个叫romeolight bpgconv 的工具，专门用来把jpg 和png 批量转换成bpg。</font></p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1721531685378-62100093-7327-4704-9842-13ae5a729073-721413.png" srcset="/img/loading.gif" lazyload alt="1721531685378-62100093-7327-4704-9842-13ae5a729073.png"></p>
<p>把图片文件夹拖进去，工具会筛选出所有jpg，jpeg 和png 文件，然后点一下左上角的三角按钮就开始批量转换。文件数量比较多，图片内容比较复杂的话转换时间会很长，吃CPU，可以全核跑满。一批图片处理完之后点左上角的圆圈箭头清空列表，然后可以再往里拖一批，不先清空的话它会把处理完的图片再处理一遍。</p>
<p>转换之前，最好先点开右上角的三条杠，打开菜单，调整一下输出文件的位置：</p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1721531712314-da14e416-8e4e-4283-862c-a9416aa3a446-572528.png" srcset="/img/loading.gif" lazyload alt="1721531712314-da14e416-8e4e-4283-862c-a9416aa3a446.png"></p>
<p>默认是自动在桌面新建个文件夹，所有输出文件放在里面，切换成“Same Location as File”，输出文件就会放在源文件同目录下，如果一次转换多个文件夹，这样图片分类不会乱。其他设置都不用动。转换完再手动把所有jpg，png 源文件删除掉就行了，比如直接rm *.jpg。</p>
<p>这个软件的官网似乎已经挂了，windows 上想安装，可以用scoop 安装个绿色版：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">scoop install bpgconv<br></code></pre></td></tr></table></figure>

<p><font style="color:rgb(77, 77, 77);">或者下载我复制出来的绿色包：</font><a target="_blank" rel="noopener" href="https://download.csdn.net/download/Etberzin/86504852">download.csdn.net&#x2F;download&#x2F;Etberzin&#x2F;86448960</a><font style="color:rgb(77, 77, 77);">，0 积分。再或者，随便搜个下载站，风险自担。</font></p>
<h2 id="预览"><a href="#预览" class="headerlink" title="预览"></a><font style="color:rgb(77, 77, 77);">预览</font></h2><p>但是转换成bpg 之后，windows 资源管理器里不能显示图片预览，想找个图片就比较麻烦，honeyview 可以打开bpg，但是没有给资源管理器集成bpg 的预览功能。所以又要找个工具，Simple BPG Image Viewer ：github.com&#x2F;asimba&#x2F;pybpgviewer&#x2F;releases&#x2F;tag&#x2F;v1.28，这也是个bpg 图片查看器，不如honeyview 好用，但是提供了bpg 预览的插件。</p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1721531820822-3fca6a90-c152-4258-9fd6-edf63166c877-823297.png" srcset="/img/loading.gif" lazyload alt="1721531820822-3fca6a90-c152-4258-9fd6-edf63166c877.png"></p>
<p><font style="color:rgb(77, 77, 77);">点击红圈里的链接下载个安装包，一路ok 安装完，可能需要把软件启动一次，然后用资源管理器打开有bpg 图片的文件夹，图片预览应该就能自动加载出来了。</font></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a><font style="color:rgb(77, 77, 77);">总结</font></h2><p>日常使用可能还是webp 更方便，支持的范围更广。要是所有图片都拿bpg 存，到时候想给别人发个图还得先转换成jpg 或者webp。只是我感觉webp 压出明显差异的可能性更大，bpg 最适合用的场合是那些估计只有自己看的一大堆图片库存，比如瑟图~ 不过几千张瑟图转换一波能省的空间也不过就几个GB 而已，大概是把一共5GB 的的图片文件夹压缩到500MB 这个程度，有没有用~ 自己看呗。</p>
<p>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/Etberzin/article/details/126502703">https://blog.csdn.net/Etberzin/article/details/126502703</a></p>
<h2 id="例题-3"><a href="#例题-3" class="headerlink" title="例题"></a>例题</h2><p>看到bpg格式的图片拖入honeyview就可以看到flag了</p>
<p><img src="/./img/49277317_Q5542BIfgUtALiTb/1721532010959-1aaf41bd-4461-4dea-a80d-a65f1c851cfe-797084.png" srcset="/img/loading.gif" lazyload alt="1721532010959-1aaf41bd-4461-4dea-a80d-a65f1c851cfe.png"></p>
<p>ctfshow{aade771916df7cde3009c0e631f9910d}</p>
<blockquote>
<p>更新: 2024-07-21 11:42:57<br>原文: <a target="_blank" rel="noopener" href="https://www.yuque.com/chaye-apqbl/vsc85q/tth8pal7cl00g180">https://www.yuque.com/chaye-apqbl/vsc85q/tth8pal7cl00g180</a></p>
</blockquote>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/misc/" class="category-chain-item">misc</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/misc/" class="print-no-link">#misc</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>杂项总结</div>
      <div>http://example.com/2025/01/19/MISC/基础/杂项总结/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>chaye</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>January 19, 2025</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/01/19/MISC/%E5%9F%BA%E7%A1%80/%E6%96%87%E4%BB%B6%E5%80%92%E5%BA%8F/" title="文件倒序">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">文件倒序</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/01/19/MISC/%E7%BC%96%E7%A0%81/01%E7%BC%96%E7%A0%81/" title="01编码">
                        <span class="hidden-mobile">01编码</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
